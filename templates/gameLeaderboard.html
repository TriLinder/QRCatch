<body>
    <head>
        <title>Leaderboard</title>
        <noscript><meta http-equiv="refresh" content="5" ></noscript>
    </head>

    <body>
        <table>
            <tr class="header">
                <th>Pos.</th>
                <th style="width: 100%;">Username</th>
                <th>Kills</th>
                <th>Deaths</th>
                <th>Score</th>
            </tr>
            {{html|safe}}
        </table> <br>

        <noscript>Enable JavaScript for an optimal experience. <br><br></noscript>
    
        <a href=".">Go back</a>
    </body>

    <style>
        table, th, td {
          text-align: center;
          border:1px solid black;
        }

        .header {
            background-color: gray;
            color: white;        }
        </style>
    
    <script>
        function check(response) {
            var current = "{{updateID|safe}}";

            console.log(current == response);

            if (current !== response) {
                console.log("Reloading..");
                window.location.reload();
            }
        }

        function request() {
            console.log("Checking server game state");

            const http = new XMLHttpRequest();

            http.open("GET", "/game/{{id}}/lastKnownStateID");
            http.send();

            http.onload = () => check(http.responseText);

            setTimeout(request, 500);
        }

        request();
    </script>
</body>